<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>BananaPuck Dashboard</title>

  <!-- Leaflet -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    defer
  ></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <link rel="stylesheet" href="styles.css" />
</head>

<body>

  <!-- MAP -->
  <div id="map" class="map"></div>

  <!-- ALERTS -->
  <section class="alerts">
    <h2>Alerts</h2>
    <div class="alert-controls">
      <button id="activeAlertsBtn" class="selected">Active</button>
      <button id="historyAlertsBtn">History</button>
      <button id="clearAlertsBtn">Clear Active</button>
      <button id="callUserBtn">Call User (Vibrate)</button>
    </div>
    <div id="alertsContainer"></div>
  </section>

  <!-- SENSOR GRID -->
  <section class="grid">

    <div class="sensor-box" data-metric="hr" data-label="Heart Rate">
      <h3>Heart Rate</h3>
      <p><span id="heartRate">--</span> bpm</p>
    </div>

    <div class="sensor-box" data-metric="breathing" data-label="Respiration">
      <h3>Respiration</h3>
      <p><span id="respirationRate">--</span> breaths/min</p>
    </div>

    <div class="sensor-box" data-metric="temp" data-label="Temperature">
      <h3>Temperature</h3>
      <p><span id="temperature">--</span> Â°C</p>
    </div>

    <div class="sensor-box" data-metric="orientation" data-label="Orientation">
      <h3>Orientation</h3>
      <p>Roll: <span id="roll">--</span></p>
      <p>Pitch: <span id="pitch">--</span></p>
      <p>Yaw: <span id="yaw">--</span></p>
    </div>

    <div class="sensor-box" data-metric="accel" data-label="Acceleration">
      <h3>Acceleration</h3>
      <p id="accelX">X: --</p>
      <p id="accelY">Y: --</p>
      <p id="accelZ">Z: --</p>
    </div>

    <div class="sensor-box" data-metric="gyro" data-label="Gyroscope">
      <h3>Gyroscope</h3>
      <p id="gyroX">X: --</p>
      <p id="gyroY">Y: --</p>
      <p id="gyroZ">Z: --</p>
    </div>

    <div class="sensor-box" data-metric="gps" data-label="GPS">
      <h3>GPS</h3>
      <p>Lat: <span id="gpsLat">--</span></p>
      <p>Lon: <span id="gpsLon">--</span></p>
      <p>Acc: <span id="gpsAcc">--</span> m</p>
    </div>

    <div class="sensor-box" data-metric="water_submerged" data-label="Water">
      <h3>Water</h3>
      <p><span id="waterSub">--</span></p>
    </div>

  </section>

  <!-- MAP LOCATION SECTION -->
  <section class="mapping">
    <h2>Location Mapping</h2>
    <button id="btnMapNewLocation">Map out new location</button>
  </section>

  <!-- HISTORY MODAL -->
  <div id="historyModalOverlay" class="modal hidden">
    <div class="modal-box">
      <h3 id="modalTitle"></h3>
      <select id="historyWindow">
        <option value="1">1 hour</option>
        <option value="6">6 hours</option>
        <option value="24" selected>24 hours</option>
      </select>

      <canvas id="historyChart"></canvas>

      <table>
        <thead>
          <tr><th>Time</th><th>Value</th></tr>
        </thead>
        <tbody id="historyTableBody"></tbody>
      </table>

      <button id="closeModalBtn">Close</button>
    </div>
  </div>

  <!-- MAPPING MODAL -->
  <div id="mappingModal" class="modal hidden">
    <div class="modal-box">
      <h3>Map New Location</h3>

      <input id="locationName" placeholder="Location name" />
      <button id="createLocationBtn">Start Mapping</button>

      <div id="mappingStep" class="hidden">
        <input type="file" id="photoInput" multiple />
        <button id="uploadPhotosBtn">Upload Photos</button>
      </div>

      <p id="mappingStatus"></p>
      <div id="photoGallery"></div>

      <button id="closeMappingModal">Close</button>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
